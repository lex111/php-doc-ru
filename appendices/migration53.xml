<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 350650 Maintainer: mch Status: ready -->
<!-- Reviewed: yes -->
<!-- $Revision$ -->
<appendix xml:id="migration53" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Миграция c PHP 5.2.x на PHP 5.3.x</title>
 <simpara>
  &manual.migration.seealso;
  <link linkend="migration5">5.0.x</link>,
  <link linkend="migration51">5.1.x</link>,
  <link linkend="migration52">5.2.x</link>,
  <link linkend="migration54">5.4.x</link>,
  <link linkend="migration55">5.5.x</link> и
  <link linkend="migration56">5.6.x</link>.
 </simpara>

 <section xml:id="migration53.changes">
  <title>Что нового в PHP 5.3.x ?</title>
  <simpara>
   Большинство изменений в PHP 5.3.x никак не повлияет на существующий код.
   Есть <link linkend="migration53.incompatible">несколько несовместимостей</link>
   и <link linkend="migration53.new-features">новых возможностей</link>, которые
   должны быть учтены, и код должен быть протестирован перед тем как переключиться
   на новую версию PHP на рабочих серверах.
  </simpara>
  <simpara>
   Для систем, которые обновились с более старой версии PHP, соответствующую
    документацию можно получить по адресам:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="migration52">Переход с PHP 5.1.x на PHP 5.2.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration51">Переход с PHP 5.0.x на PHP 5.1.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration5">Переход с PHP 4 на PHP 5.0.x</link>.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.incompatible">
  <title>Обратно несовместимые изменения</title>
  <simpara>
   Хотя большая часть существующего кода PHP 5 должна работать без изменений,
   пожалуйста, примите к сведению следующие обратно несовместимые изменения:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Новый внутренний API разбора параметров был применен во всех
     расширениях, идущих в комплекте с PHP 5.3.x. Этот API разбора параметров требует
     от функций возвращать &null; при передаче несовместимых параметров. Есть
     некоторые исключения из этого правила, например, функция <function>get_class</function>,
     которая будет продолжать возвращать &false; в случае ошибки.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>clearstatcache</function> больше не очищает кеш функции realpath по
     умолчанию.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>realpath</function> стала полностью независима от платформы.
     Следствием этого является то, что некорректные относительные пути, такие как
     <literal>__FILE__ . "/../x"</literal> больше не работают.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Семейство функций <function>call_user_func</function> стало использовать
     <literal>$this</literal>, даже если вызываемая функция - это родительский класс.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функции работы с массивами <function>natsort</function>,
     <function>natcasesort</function>, <function>usort</function>,
     <function>uasort</function>, <function>uksort</function>,
     <function>array_flip</function> и <function>array_unique</function> больше
     не принимают объекты в качестве аргументов. Для применения этих функций к
     объекту, необходимо сначала привести его к массиву.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Поведение функций при передаче параметров по значению, в которых параметры передаются по ссылке,
     было изменено. Там, где прежде функция принимала параметр по значению, сейчас генерируется
     фатальная ошибка. Любой прежний код, который передает константы или значения в качестве
     параметров функциям, которые ожидают ссылки, необходимо будет изменить, чтобы
     присвоить значение переменной перед вызовом функции.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Новая библиотека mysqlnd требует применения нового 41-го байтного формата пароля,
     который был введен в MySQL 4.1. Если вы продолжаете использовать 16-ти байтные пароли,
     это будет вынуждать функции <function>mysql_connect</function> и подобные ей генерировать
     ошибку <literal>"mysqlnd cannot connect to MySQL 4.1+ using old
     authentication."</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Новая библиотека mysqlnd не читает конфигурационные файлы mysql (my.cnf/my.ini),
     как это делает старая библиотека libmysqlclient. Если ваш код использует настройки в
     конфигурационном файле, вы можете загрузить их явно с помощью функции
     <function>mysqli_options</function>. Обратите внимание, что это означает, что
     константы PDO <constant>PDO::MYSQL_ATTR_READ_DEFAULT_FILE</constant> и
     <constant>PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</constant> не определены, если
     MySQL не компилировался с поддержкой mysqlnd.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Завершающий символ "/" был удален из класса <classname>SplFileInfo</classname>
     и других связанных с ним классов каталогов.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Магический метод <link linkend="object.tostring">__toString()</link>
     не принимает больше аргументы.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Магические методы
     <link linkend="object.get">__get()</link>,
     <link linkend="object.set">__set()</link>,
     <link linkend="object.isset">__isset()</link>,
     <link linkend="object.unset">__unset()</link> и
     <link linkend="object.call">__call()</link> должны всегда
     быть публичными и не могут быть статическими. Объявления методов теперь стали более строгими.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Магический метод <link linkend="object.call">__call()</link>
     теперь вызывается при доступе к закрытым и защищенным методам.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>func_get_arg</function>, <function>func_get_args</function> и
     <function>func_num_args</function> теперь не могут быть вызваны
     извне области видимости файла, который включается директивой
     <function>include</function> или <function>require</function> из
  функции в вызывающем файле.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлен слой эмуляции расширения MHASH, чтобы служить оберткой
  вокруг расширения Hash. Однако не все алгоритмы покрыты,
  в их числе и алгоритм хеширования s2k. Это означает,
  что алгоритм хеширования s2k больше недоступен в пакете PHP 5.3.0.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Следующие ключевые слова теперь зарезервированы и не могут
   использоваться в качестве названия функции, класса и т.д.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="control-structures.goto">goto</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="language.namespaces">namespace</link>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.new-features">
  <title>Новые возможности</title>
  <simpara>
   PHP 5.3.0 предлагает широкий спектр новых возможностей:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Добавлена поддержка <link linkend="language.namespaces">пространств имен</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлена поддержка <link linkend="language.oop5.late-static-bindings">позднего статического
     связывания</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлена поддержка <link linkend="control-structures.goto">меток перехода</link>
     (ограниченный goto).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлена поддержка нативных <link linkend="functions.anonymous">замыканий (closures)</link>
     (анонимные/лямбда-функции).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Появились два магических метода:
     <link linkend="object.callstatic">__callStatic()</link> и
     <link linkend="object.invoke">__invoke()</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Появилась поддержка синтаксиса <link linkend="language.types.string.syntax.nowdoc">Nowdoc</link>,
  подобный
     <link linkend="language.types.string.syntax.heredoc">Heredoc</link>,
     но с одинарными кавычками.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Теперь возможно использовать
     <link linkend="language.types.string.syntax.heredoc">Heredoc</link> для
     инициализации статических переменных и свойств/констант классов.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="language.types.string.syntax.heredoc">Heredoc</link> теперь
     может быть объявлен, используя двойные кавычки, дополняющие синтаксис
     <link linkend="language.types.string.syntax.nowdoc">Nowdoc</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="language.constants.syntax">Константы</link> теперь могут быть
     объявлены вне класса, используя ключевое слово <literal>const</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     У <link linkend="language.operators.comparison.ternary">тернарного оператора</link>
     есть теперь сокращенный вид: <literal>?:</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Обертка (wrapper) HTTP-потока стала воспринимать коды статуса от 200 до 399
     как успешные.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Стал возможен динамический доступ к статическим методам:
    </simpara>
    <informalexample>
     <programlisting role="php">
<![CDATA[
<?php
class C {
   public static $foo = 123;
}

$a = "C";
echo $a::$foo;
?>
]]>
     </programlisting>
     &example.outputs;
     <screen>
<![CDATA[
123
]]>
     </screen>
    </informalexample>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="language.exceptions">Исключения</link> теперь могут быть вложенными:
    </simpara>
    <informalexample>
     <programlisting role="php">
<![CDATA[
<?php
class MyCustomException extends Exception {}

try {
    throw new MyCustomException("Exceptional", 112);
} catch (Exception $e) {
    /* Обратите внимание, что для передачи $e
     * в RuntimeException используется третий параметр. */
    throw new RuntimeException("Rethrowing", 911, $e);
}
?>
]]>
     </programlisting>
    </informalexample>
   </listitem>
   <listitem>
    <simpara>
     Добавлен <link linkend="features.gc">сборщик мусора</link> для циклических ссылок.
     Он включен по умолчанию.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>mail</function> теперь поддерживает журналирование отправки письма
     с помощью директивы <link linkend="ini.mail.log">mail.log</link>.
     (Примечание: это применимо только для писем, отправленных этой функцией.)
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.windows">
  <title>Изменения в поддержке Windows</title>
  <simpara>
   Изменения к выпускам PHP для Windows:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Минимально необходимая версия Windows теперь Windows XP SP3. Windows 98, ME, 2000 и NT4
     больше не поддерживаются.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Бинарные файлы для Windows теперь скомпилированы для i586 и более поздних платформ.
     Платформы i386 и i486 более не поддерживаются.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Теперь есть экспериментальная поддержка для x64 версий PHP под Windows.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Теперь присутствует поддержка компилятора Visual C++ 9 (VC9), используемого в Visual Studio
     2008. Снапшоты и релизы будут также доступны для VC9. Старые бинарные файлы для
     VC6 все еще поддерживаются и выпускаются в соответствии с VC9.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Библиотека <link linkend="ref.pdo-oci">PDO_OCI</link>
     <literal>php_pdo_oci8.dll</literal> (для использования с клиентскими библиотеками для сервера Oracle версии 8)
     более не собирается. Вместо нее используйте
     <literal>php_pdo_oci.dll</literal> (без '8') с клиентскими библиотеками Oracle 10 или 11.
     Соединение с базами данных других версий все еще поддерживается.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Для расширения <link linkend="book.oci8">OCI8</link> новая библиотека
     <literal>php_oci8_11g.dll</literal> доступна как дополнение к
     <literal>php_oci8.dll</literal>. Подключена может быть только одна из библиотек. Используйте
     <literal>php_oci8.dll</literal> с клиентскими библиотеками Oracle 10.2. Используйте
     <literal>php_oci8_11g.dll</literal> с клиентскими библиотеками Oracle 11 и старше.
     Соединение с базами данных других версий все еще поддерживается.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Поддержка Windows была добавлена для следующих функций:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>checkdnsrr</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>dns_get_record</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>fnmatch</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>getmxrr</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>getopt</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>imagecolorclosesthwb</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>inet_ntop</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>inet_pton</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>link</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>linkinfo</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mcrypt_create_iv</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>readlink</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>socket_create_pair</function>
     - Эта функция была доступна и прежде на платформе Windows, но была отключена, начиная с
     PHP 4.3.0 по причине ошибки в ней.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>stream_socket_pair</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>symlink</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>time_nanosleep</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>time_sleep_until</function>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Другие изменения:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Улучшена переносимость функций <function>stat</function>,
     <function>touch</function>, <function>filemtime</function>,
     <function>filesize</function> и других функций, связанных с ними (100%
     переносимость для имеющейся информации).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Теперь возможно создание жестких ссылок на Windows, используя
     функцию <function>link</function>, и символических ссылок, используя
     функцию <function>symlink</function>. Жесткие ссылки доступны, начиная с
     Windows 2000, символические - начиная с Windows Vista.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Версия PHP для Windows теперь предоставляет набор констант с префиксом
     <literal>PHP_WINDOWS_*</literal>. Список констант и примеры использования
     можно найти в разделе <xref linkend="info.constants" />.
    </simpara>
   </listitem>
  </itemizedlist>
  <warning>
   <simpara>
    Поддержка модуля ISAPI была прекращена. Вместо него используйте улучшенный модуль
    FastCGI SAPI.
   </simpara>
  </warning>
  <note>
   <simpara>
    Стал доступен новый отдельный сайт для PHP под Windows, включающий
    раздел загрузок, релиз-кандидаты и снапшоты в различных вариантах
    (thread-safe/not-thread-safe, VC6/VC9, x86/x64). URL этого сайта следующий
    <link xlink:href="&url.php.windows;">&url.php.windows;</link>.
   </simpara>
  </note>
 </section>

 <section xml:id="migration53.sapi">
  <title>Изменения в модулях SAPI</title>
  <itemizedlist>
   <listitem>
    <simpara>
     Доступен новый модуль SAPI, называемый litespeed.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Поддержка FastCGI в CGI SAPI теперь всегда включена и не может быть
     отключена. Для более детальной информации см. <literal>sapi/cgi/CHANGES</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Новая опция CGI SAPI <literal>-T</literal> может быть использована для измерения
     времени повторяющегося исполнения скрипта.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     В CGI/FastCGI теперь есть поддержка для .htaccess-стиля файлов &php.ini;, определяемых пользователем.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>dl</function> теперь отключена по умолчанию и доступна только
     для CLI, CGI и встраиваемых SAPI.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.deprecated">
  <title>Устаревшие функции и возможности в PHP 5.3.x</title>
  <simpara>
   PHP 5.3.0 вводит два новых уровня ошибок: <constant>E_DEPRECATED</constant>
   и <constant>E_USER_DEPRECATED</constant>. Уровень ошибки <constant>E_DEPRECATED</constant>
   используется, чтобы показать, что функция или возможность устарела.
   Ошибка <constant>E_USER_DEPRECATED</constant> предназначена для обозначения
   устаревших функций в пользовательском коде, подобно уровням
   <constant>E_USER_ERROR</constant> и <constant>E_USER_WARNING</constant>.
  </simpara>
  <simpara>
   Следующий список - это перечень устаревших INI-директив. Использование любой из
   этих директив будет приводить к генерации ошибки <constant>E_DEPRECATED</constant>
   при запуске.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="ini.define-syslog-variables">define_syslog_variables</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.register-globals">register_globals</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.register-long-arrays">register_long_arrays</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.safe-mode">safe_mode</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.magic-quotes-gpc">magic_quotes_gpc</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.magic-quotes-runtime">magic_quotes_runtime</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     magic_quotes_sybase
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Комментарии, начинающиеся с символа "#", теперь считаются устаревшими в INI-файлах.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Устаревшие функции:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>call_user_method</function> (используйте
     <function>call_user_func</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>call_user_method_array</function> (используйте
     <function>call_user_func_array</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>define_syslog_variables</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>dl</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>ereg</function> (используйте <function>preg_match</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>ereg_replace</function> (используйте <function>preg_replace</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>eregi</function> (используйте <function>preg_match</function> с модификатором
     <literal>'i'</literal>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>eregi_replace</function> (используйте <function>preg_replace</function>
     с модификатором <literal>'i'</literal>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mcrypt_generic_end</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>set_magic_quotes_runtime</function> и ее синоним
     <function>magic_quotes_runtime</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>session_register</function> (используйте суперглобальный массив <varname>$_SESSION</varname>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>session_unregister</function> (используйте суперглобальный массив
     <varname>$_SESSION</varname>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>session_is_registered</function> (используйте суперглобальный массив
     <varname>$_SESSION</varname>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>set_socket_blocking</function> (используйте
     <function>stream_set_blocking</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>split</function> (используйте <function>preg_split</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>spliti</function> (используйте <function>preg_split</function> с модификатором
     <literal>'i'</literal>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>sql_regcase</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mysql_db_query</function> (используйте
     <function>mysql_select_db</function> и <function>mysql_query</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mysql_escape_string</function> (используйте
     <function>mysql_real_escape_string</function>)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Передача строки, задающей категорию функций, на которые будет влиять установка локали, сейчас
  считается устаревшим вариантом. Используйте вместо этого семейство констант LC_*
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Параметр <parameter>is_dst</parameter> в функции <function>mktime</function>.
     Вместо него используйте новые функции работы с временными зонами.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Устаревшие возможности:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Присвоение по ссылке возвращаемого значения оператором
     <link linkend="language.oop5.basic.new">new</link> является устаревшим.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Передача по ссылке во время исполнения объявлено устаревшим.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.undeprecated">
  <title>Функции и возможности, которые ранее считались устаревшими, а теперь снова возвращены в PHP 5.3.x</title>
  <simpara>
   Функция <function>is_a</function> больше не является устаревшей по причине своей
   популярности; она не будет больше генерировать ошибку <constant>E_STRICT</constant>.
  </simpara>
 </section>

 <section xml:id="migration53.parameters">
  <title>Новые параметры</title>
  <simpara>
   К некоторым функциям были добавлены новые необязательные параметры в PHP 5.3:
  </simpara>
  <simpara>Ядро PHP:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>clearstatcache</function>
     - Добавлен параметр <parameter>clear_realpath_cache</parameter> и
     <parameter>filename</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>copy</function>
     - Добавлен параметр контекста потока <parameter>context</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>fgetcsv</function>
     - Добавлен параметр <parameter>escape</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>ini_get_all</function>
     - Добавлен параметр <parameter>details</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>nl2br</function>
     - Добавлен параметр <parameter>is_xhtml</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>parse_ini_file</function>
     - Добавлен параметр <parameter>scanner_mode</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>round</function>
     - Добавлен параметр <parameter>mode</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>stream_context_create</function>
     - Добавлен параметр <parameter>params</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>strstr</function> и <function>stristr</function>
     - Добавлен параметр <parameter>before_needle</parameter>.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.json">json</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>json_encode</function>
     - Добавлен параметр <parameter>options</parameter>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>json_decode</function>
     - Добавлен параметр <parameter>depth</parameter>.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.stream">Потоки</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>stream_select</function>,
     <function>stream_set_blocking</function>,
     <function>stream_set_timeout</function> и
     <function>stream_set_write_buffer</function> теперь работают с пользовательскими
     обертками потоков.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara>sybase_ct:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>sybase_connect</function>
     - Добавлен параметр <parameter>new</parameter>.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara>
   Новые параметры методов в PHP 5.3.0:
  </simpara>
  <simpara>Ядро PHP:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <methodname>Exception::__construct</methodname>
     - Добавлен параметр <parameter>previous</parameter>.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.functions">
  <title>Новые функции</title>
  <simpara>
   В PHP 5.3 введены несколько новых функций:
  </simpara>

  <simpara>Ядро PHP:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>array_replace</function>
     - Заменяет элементы массива элементами других переданных массивов.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>array_replace_recursive</function>
     - Рекурсивно заменяет элементы массива элементами переданных массивов.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>class_alias</function>
     - Создает псевдоним для пользовательского класса.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>forward_static_call</function>
     - Вызывает пользовательскую функцию из контекста метода.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>forward_static_call_array</function>
     - Вызывает пользовательскую функцию из контекста метода с аргументами,
     содержащимися в массиве.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>gc_collect_cycles</function>
     Принудительно включает коллектор существующих циклических ссылок.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>gc_disable</function>
     - Деактивирует коллектор циклических ссылок.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>gc_enable</function>
     - Активирует коллектор циклических ссылок.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>gc_enabled</function>
     - Возвращает статус коллектора циклических ссылок.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>get_called_class</function>
     - Возвращает имя класса, в котором был вызван статический метод.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>gethostname</function>
     - Возвращает имя хоста для локального компьютера.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>header_remove</function>
     - Удаляет HTTP-заголовок, ранее установленный функцией
     <function>header</function>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>lcfirst</function>
     - Переводит в нижний регистр первый символ строки.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>parse_ini_string</function>
     - Разбирает строку конфигурации.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>quoted_printable_encode</function>
     - Кодирует 8-битную строку с помощью метода quoted-printable.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>str_getcsv</function>
     - Выполняет разбор CSV-строки в массив.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>stream_context_set_default</function>
     - Устанавливает контекст потоков по умолчанию.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>stream_supports_lock</function>
     - Возвращает &true;, если поток поддерживает блокирование.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>stream_context_get_params</function>
     - Получает параметры контекста потока.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>streamWrapper::stream_cast</function>
     - Получает базовый ресурс потока.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>streamWrapper::stream_set_option</function>
     - Изменяет опции потока.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.datetime">Date/Time</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>date_add</function>
     - Добавляет заданное количество дней, месяцев, лет, минут и секунд к объекту
     <classname>DateTime</classname>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>date_create_from_format</function>
     - Возвращает объект <classname>DateTime</classname>, приведенный в соответствие с
    заданным форматом.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>date_diff</function>
     - Возвращает разницу между двумя объектами
     <classname>DateTime</classname>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>date_get_last_errors</function>
     - Возвращает предупреждения и ошибки, которые произошли при последней операции с датой или временем.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>date_parse_from_format</function>
     - Получает информацию о заданной дате.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>date_sub</function>
     - Вычитает заданное количество дней, месяцев, лет, минут и секунд от объекта.
     <classname>DateTime</classname>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>timezone_version_get</function>
     - Возвращает версию базы данных timezonedb.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.gmp">GMP</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>gmp_testbit</function>
     - Проверяет, установлен ли бит.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.hash">Hash</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>hash_copy</function>
     - Копирование контекста хэширования.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.imap">IMAP</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>imap_gc</function>
     - Очищает кеш IMAP.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>imap_utf8_to_mutf7</function>
     - Кодирует строку UTF-8 в модифицированный UTF-7.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>imap_mutf7_to_utf8</function>
     - Декодирует строку из модифицированного UTF-7 в UTF-8.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.json">JSON</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>json_last_error</function>
     - Возвращает последнюю ошибку JSON.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.mysqli">Улучшенный модуль MySQL (MySQL Improved)</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>mysqli_fetch_all</function>
     - Извлекает все строки результата в виде ассоциативного массива с ключами в виде чисел
     или в совмещенном виде.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mysqli_get_connection_stats</function>
     - Возвращает статистику соединения с клиентом.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mysqli_poll</function>
     - Опрос соединений.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>mysqli_reap_async_query</function>
     - Получает результат асинхронного запроса.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.openssl">OpenSSL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>openssl_random_pseudo_bytes</function>
     - Возвращает строку заданной длины, заполненную псевдослучайной последовательностью
     байт.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.pcntl">PCNTL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>pcntl_signal_dispatch</function>
     - Вызывает обработчик сигналов для отложенных сигналов.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>pcntl_sigprocmask</function>
     - Устанавливает и получает заблокированные сигналы.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>pcntl_sigtimedwait</function>
     - Ожидание сигнала с таймаутом.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>pcntl_sigwaitinfo</function>
     - Ожидание сигнала.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.pcre">PCRE</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>preg_filter</function>
     - Выполняет поиск и замену по регулярному выражению, возвращая только результаты
     совпавшего шаблона.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.sem">Семафоры</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>msg_queue_exists</function>
     - Проверка на существование очереди сообщений.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>shm_has_var</function>
     - Проверяет, существует ли конкретный ключ внутри сегмента разделяемой памяти.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara>
   Следующие функции теперь полностью реализованы в PHP на всех ОС, на которых
   может работать PHP:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>acosh</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>asinh</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>atanh</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>expm1</function>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>log1p</function>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.new-stream-wrappers">
  <title>Новые обертки потоков</title>
  <simpara>
   Следующие обертки потоков были введены в версии 5.3.0:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="wrappers.glob">glob://</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="wrappers.phar">phar://</link>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.new-stream-filters">
  <title>Новые фильтры потоков</title>
  <simpara>
   Следующие фильтры потоков были введены в версии 5.3.0:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     dechunk (изменяет кодировку HTTP chunked на противоположную, т.е. исходную)
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Фильтр bz2.decompress теперь поддерживает конкатенацию.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.class-constants">
  <title>Новые константы классов</title>
  <simpara>
   Некоторые новые константы классов были добавлены в версии 5.3.0:
  </simpara>

  <simpara><link linkend="ref.pdo-firebird">PDO_FIREBIRD</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>PDO::FB_ATTR_DATE_FORMAT</constant>
     - Устанавливает формат даты.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PDO::FB_ATTR_TIME_FORMAT</constant>
     - Устанавливает формат времени.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PDO::FB_ATTR_TIMESTAMP_FORMAT</constant>
     - Устанавливает формат временной метки.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.methods">
  <title>Новые методы</title>
  <simpara>
   Несколько новых методов были введены в версии 5.3.0:
  </simpara>

  <simpara><link linkend="book.datetime">Date/Time</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>DateTime::add</function>
     - Добавляет заданное количество дней, месяцев, лет, часов, минут и секунд к объекту
     <classname>DateTime</classname>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>DateTime::createFromFormat</function>
     - Возвращает объект <classname>DateTime</classname>, приведенный в соответствие с
     заданным форматом.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>DateTime::diff</function>
     - Возвращает разницу между двумя объектами <classname>DateTime</classname>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>DateTime::getLastErrors</function>
     - Возвращает предупреждения и ошибки, которые произошли при последней операции с датой или с временем.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>DateTime::sub</function>
     - Вычитает заданное количество дней, месяцев, лет, минут и секунд от объекта.
     <classname>DateTime</classname>.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara>Класс <classname>Exception</classname>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>Exception::getPrevious</function>
     - Возвращает предыдущее исключение.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.dom">DOM</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>DOMNode::getLineNo</function>
     - Возвращает номер строки узла.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="ref.pdo-firebird">PDO_FIREBIRD</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>PDO::setAttribute</function>
     - Устанавливает атрибут.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.reflection">Reflection</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <methodname>ReflectionClass::getNamespaceName</methodname>
     - Возвращает пространство имен, в котором определен данный класс.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <methodname>ReflectionClass::getShortName</methodname>
     - Возвращает короткое имя данного класса (без части, в которой находится пространство имен).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <methodname>ReflectionClass::inNamespace</methodname>
     - Проверяет, объявлен ли класс в пространстве имен.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <methodname>ReflectionFunction::getNamespaceName</methodname>
     - Возвращает название пространства имен, в котором определена данная функция.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <methodname>ReflectionFunction::getShortName</methodname>
     - Возвращает короткое имя функции (без пространства имен).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <methodname>ReflectionFunction::inNamespace</methodname>
     - Проверяет, определена ли функция в пространстве имен.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <methodname>ReflectionProperty::setAccessible</methodname>
     - Устанавливает, могут ли необщедоступные свойства быть запрошены.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.spl">SPL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>SplObjectStorage::addAll</function>
     - Добавляет все элементы к другому объекту SplObjectStorage.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <function>SplObjectStorage::removeAll</function>
     - Убирает все элементы из другого объекта SplObjectStorage.
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.xsl">XSL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>XSLTProcessor::setProfiling</function>
     - Устанавливает файл для вывода профиля.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.new-extensions">
  <title>Новые расширения</title>
  <simpara>
   Следующие расширения были добавлены, начиная с PHP 5.3.0:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.enchant">Enchant</link>
     - Слой абстракции над различными библиотеками правописания
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.fileinfo">Fileinfo</link>
     - Усовершенствованная и более серьезная замена (с полной бинарной совместимостью) расширению
     <link linkend="book.mime-magic">Mimetype</link>, которое было
      удалено.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.intl">INTL</link>
     - Расширение для интернационализации. INTL - это обертка вокруг библиотеки
     <link xlink:href="&url.icu.home;">ICU</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.phar">Phar</link>
     - Реализация файлов-архивов PHP.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.sqlite3">SQLite3</link>
     - Поддержка БД SQLite версии 3.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Mysqlnd - это новая основная библиотека, поставляемая с PHP. Это адаптированная для PHP
   замена для libmysqlclient. Mysqlnd будет использована для сборки расширения
   <link linkend="book.mysql">mysql</link>,
   <link linkend="book.mysqli">mysqli</link>
   и <link linkend="ref.pdo-mysql">PDO_MySQL</link>, если libmysqlclient
   не будет найдена в системе. Она также может быть использована вместо libmysqlclient, даже когда
   libmysqlclient присутствует. Mysqlnd рекомендуется для всех установок PHP из соображений
   производительности.
  </simpara>
 </section>

 <section xml:id="migration53.removed-extensions">
  <title>Удаленные расширения</title>
  <simpara>
   Следующие расширения перемещены в репозиторий PECL и больше не будут поставляться
   с дистрибутивом PHP. Версии этих расширений в виде пакетов PECL будут создаваться
   в соответствии с потребностями пользователей.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.dbase">dbase</link>
     - Более не поддерживается
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.fbsql">fbsql</link>
     - Более не поддерживается
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.fdf">fdf</link>
     - Поддерживается
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     ming - Поддерживается
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.msql">msql</link>
     - Более не поддерживается
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.ncurses">ncurses</link>
     - Поддерживается
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     sybase
     - Убрано из дистрибутива; вместо него используйте расширение
     sybase_ct
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.mhash">mhash</link>
     - Убрано из дистрибутива; вместо него используйте расширение
     <link linkend="book.hash">hash</link>.
     <link linkend="book.hash">hash</link> обладает полной совместимостью с mhash;
     все существующие приложения, использующие старые функции будут
     продолжать работать.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.extensions-other">
  <title>Другие изменения в расширениях</title>
  <simpara>
   Следующие расширения не могут быть отключены в момент
   конфигурирования сборки:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.pcre">PCRE</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.reflection">Reflection</link>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.spl">SPL</link>
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Изменения в поведении расширений и новые возможности:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="book.datetime">Дата и время</link>
     - Переменная окружения TZ больше не используется для определения временной зоны
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.curl">cURL</link>
     - cURL теперь поддерживает SSH
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.network">Network</link>
     - <function>dns_check_record</function> теперь возвращает дополнительные
     записи типа TXT.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.hash">Hash</link>
     - Теперь поддерживаются хеш-алгоритмы SHA-224 и salsa.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.mbstring">mbstring</link>
     - Теперь есть поддержка для кодировки CP850.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.oci8">OCI8</link>
     - Вызов функции <function>oci_close</function> при постоянном соединении, или
     выход за зону видимости переменной, ссылающейся на постоянное соединение, теперь приводит
     к откату любой незавершенной транзакции. Для того, чтобы избежать непредсказуемого поведения,
     явно дается команда подтверждения или отката транзакции при необходимости. Предыдущее поведение может быть включено
     с помощью INI-директивы
     <link linkend="ini.oci8.old-oci-close-semantics">oci8.old_oci_close_semantics</link>.
    </simpara>
    <simpara>
     Теперь поддерживается пул постоянных соединений к БД (DRCP) и быстрое
     оповещение приложения (FAN).
    </simpara>
    <simpara>
     Поддерживается внешняя аутентификация Oracle (за исключением Windows).
    </simpara>
    <simpara>
     Функция <function>oci_bind_by_name</function> теперь поддерживает тип данных SQLT_AFC
     (также известный как CHAR).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.openssl">OpenSSL</link>
     - Теперь поддерживаются функции свертки и шифрования OpenSSL. Также стало возможно
     получение доступа к внутренним значениям DSA, RSA и DH ключей.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.session">Сессии</link>
     - Сессионные файлы теперь больше не хранятся в <literal>"/tmp"</literal>,
     когда применены ограничения <link linkend="ini.open-basedir">open_basedir</link>,
     за исключением случая, когда директория <literal>"/tmp"</literal> явно добавлена к списку
     разрешенных путей.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.soap">SOAP</link>
     Теперь поддерживает установленные пользователем HTTP-заголовки.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.mysqli">MySQLi</link>
     Теперь поддерживает постоянные соединения, путем добавления к хосту
     <literal>"p:"</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="book.image">Обработка изображений и GD</link>
     Индекс "JPG Support", возвращаемый функцией <function>gd_info</function> был
     переименован в "JPEG Support".
    </simpara>
   </listitem>


  </itemizedlist>
 </section>

 <section xml:id="migration53.classes">
  <title>Новые классы</title>
  <simpara>
   Следующие новые классы были введены в PHP 5.3.0:
  </simpara>

  <simpara><link linkend="book.datetime">Date/Time</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>DateInterval</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>DatePeriod</classname>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.phar">Phar</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>Phar</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>PharData</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>PharException</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>PharFileInfo</classname>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.spl">SPL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <classname>FilesystemIterator</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>GlobIterator</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>MultipleIterator</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>RecursiveTreeIterator</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplDoublyLinkedList</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplFixedArray</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplHeap</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplMaxHeap</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplMinHeap</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplPriorityQueue</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplQueue</classname>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <classname>SplStack</classname>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.global-constants">
  <title>Новые глобальные константы</title>

  <simpara>Ядро PHP:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>__DIR__</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>__NAMESPACE__</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>E_DEPRECATED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>E_USER_DEPRECATED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>INI_SCANNER_NORMAL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>INI_SCANNER_RAW</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_MAXPATHLEN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_NT_DOMAIN_CONTROLLER</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_NT_SERVER</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_NT_WORKSTATION</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_BUILD</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_MAJOR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_MINOR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_PLATFORM</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_PRODUCTTYPE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_SP_MAJOR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_SP_MINOR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>PHP_WINDOWS_VERSION_SUITEMASK</constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.curl">cURL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>CURLOPT_PROGRESSFUNCTION</constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.image">GD</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>IMG_FILTER_PIXELATE</constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.json">JSON</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>JSON_ERROR_CTRL_CHAR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_ERROR_DEPTH</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_ERROR_NONE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_ERROR_STATE_MISMATCH</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_ERROR_SYNTAX</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_FORCE_OBJECT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_HEX_TAG</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_HEX_AMP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_HEX_APOS</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>JSON_HEX_QUOT</constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.ldap">LDAP</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>LDAP_OPT_NETWORK_TIMEOUT</constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.libxml">libxml</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>LIBXML_LOADED_VERSION </constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.pcre">PCRE</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>PREG_BAD_UTF8_OFFSET_ERROR</constant>
    </simpara>
   </listitem>
  </itemizedlist>

  <simpara><link linkend="book.pcntl">PCNTL</link>:</simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <constant>BUS_ADRALN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>BUS_ADRERR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>BUS_OBJERR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CLD_CONTIUNED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CLD_DUMPED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CLD_EXITED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CLD_KILLED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CLD_STOPPED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>CLD_TRAPPED</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_FLTDIV</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_FLTINV</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_FLTOVF</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_FLTRES</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_FLTSUB</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_FLTUND</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_INTDIV</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>FPE_INTOVF</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_BADSTK</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_COPROC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_ILLADR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_ILLOPC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_ILLOPN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_ILLTRP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_PRVOPC</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>ILL_PRVREG</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>POLL_ERR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>POLL_HUP</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>POLL_IN</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>POLL_MSG</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>POLL_OUT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>POLL_PRI</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SEGV_ACCERR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SEGV_MAPERR</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_ASYNCIO</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_KERNEL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_MESGQ</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_NOINFO</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_QUEUE</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_SIGIO</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_TIMER</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_TKILL</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SI_USER</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SIG_BLOCK</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SIG_SETMASK</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>SIG_UNBLOCK</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>TRAP_BRKPT</constant>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <constant>TRAP_TRACE</constant>
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.ini">
  <title>Изменения в работе с INI-файлами</title>
  <simpara>
   В PHP 5.3.0 была значительно улучшена производительность при разборе INI-файлов
   и добавлено несколько новых синтаксических возможностей.
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     Стандартные файлы &php.ini; были реорганизованы и переименованы.
     <literal>php.ini-development</literal> содержит настройки, рекомендуемые для
     использования при разработке. <literal>php.ini-production</literal>
     содержит настройки, рекомендуемые при производственной эксплуатации.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Теперь присутствует поддержка двух специальных секций:
     <literal>[PATH=/opt/httpd/www.example.com/]</literal> и
     <literal>[HOST=www.example.com]</literal>. Директивы, установленные в этих
     секциях не могут быть переопределены в пользовательских INI-файлах или при
     выполнении. Более детальную информацию об этих секциях можно найти
     <link linkend="ini.sections">здесь</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.zend-extension-debug">zend_extension_debug</link>,
     <link linkend="ini.zend-extension-debug-ts">zend_extension_debug_ts</link>
     и <link linkend="ini.zend-extension-ts">zend_extension_ts</link> были удалены.
     Используйте директиву <link linkend="ini.zend-extension">zend_extension</link>
     для загрузки всех расширений Zend.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Директива <link linkend="ini.zend.ze1-compatibility-mode">zend.ze1_compatibility_mode</link>
     была удалена. Если эта INI-директива установлена в On, то при запуске
     будет сгенерирована ошибка <constant>E_ERROR</constant>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Стало возможным использования полного пути для загрузки модулей, используя
     директиву "<link linkend="ini.extension">extension</link>".
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>"ini-variables"</literal> могут быть использованы почти везде в
     файле &php.ini;.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     В процессе исполнения скрипта возможно ужесточение ограничений, заданных
     директивой <link linkend="ini.open-basedir">open_basedir</link>, и область
     действия самой директивы теперь PHP_INI_ALL.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Стало возможным использовать буквенно-цифровые или переменные индексы в
     массивах INI-опций.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>get_cfg_var</function> сейчас способна возвращать массив из INI-опций.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлены две новых почтовых директивы:
     <link linkend="ini.mail.add-x-header">mail.add_x_header</link> и
     <link linkend="ini.mail.log">mail.log</link>.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Были добавлены следующие INI-директивы:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <literal>user_ini.filename</literal> и
     <literal>user_ini.cache_ttl</literal> для контроля
     <link linkend="configuration.file.per-user">пользовательских INI-файлов</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Была добавлена директива <link linkend="ini.exit-on-timeout">exit_on_timeout</link>.
     Она служит для принудительного завершения дочерних процессов Apache 1.x в случае
     тайм-аута при выполнении PHP-кода.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлена директива <literal>mbstring.http_output_conv_mimetype</literal>.
     Она указывает шаблон регулярного выражения для типов контента, для которых активируется
     функция <function>mb_output_handler</function>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Добавлена  <link linkend="ini.request-order">request_order</link>.
     Позволяет контролировать, какая внешняя переменная будет доступна в массиве
     <varname>$_REQUEST</varname>.
    </simpara>
   </listitem>
  </itemizedlist>
  <simpara>
   Следующие INI-директивы получили новые значения по умолчанию:
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="ini.session.use-only-cookies">session.use_only_cookies</link>
     теперь установлена в <literal>"1"</literal> (включено) по умолчанию.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ini.oci8.default-prefetch">oci8.default_prefetch</link> изменено с
     <literal>"10"</literal> на <literal>"100"</literal>.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>

 <section xml:id="migration53.other">
  <title>Другие изменения</title>
  <itemizedlist>
   <listitem>
    <simpara>
     <function>SplFileInfo::getpathinfo</function> теперь возвращает информацию о
     пути.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     У <classname>SplObjectStorage</classname> теперь есть поддержка
     <classname>ArrayAccess</classname>. Теперь также возможно
     хранить ассоциативную информацию с объектами в
     <classname>SplObjectStorage</classname>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     В расширении GD теперь возможно объединение пикселей в группы с помощью
     функции <function>imagefilter</function>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Вывод функции <function>var_dump</function> теперь включает свойства закрытых объектов.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>session_start</function> теперь возвращает &false;, когда
     начало сессии происходит неудачно.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>property_exists</function> теперь проверяет существование свойства,
     независимо от доступности (так же как <function>method_exists</function>).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="wrappers">Обертки потоков</link> теперь могут использоваться
     <link linkend="ini.include-path">include_path</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Параметр <parameter>initial</parameter> для функции
     <function>array_reduce</function> теперь может быть любого типа.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="ref.dir">Функции для работы с директориями</link>
     <function>opendir</function>, <function>scandir</function> и
     <function>dir</function> теперь используют контекст потока по умолчанию, если он
     не задан явно.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     У функции <function>crypt</function> теперь есть поддержка Blowfish и расширенного DES, и
     возможности <function>crypt</function> теперь 100% переносимы. У PHP имеется своя собственная
     внутренняя реализация crypt, которая используется вместо
     <literal>crypt</literal> или <literal>crypt_r</literal>, когда они не найдены.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>getopt</function> теперь принимает "длинные опции" на всех платформах.
     Поддерживаются необязательные значения и <literal>=</literal> в качестве
     разделителя для коротких опций.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     У функции <function>fopen</function> теперь есть новый режим (<literal>n</literal>),
     который передает константу <constant>O_NONBLOCK</constant> соответствующему низлежащему
     системному вызову <literal>open()</literal>. Обратите внимание, что этот режим в настоящее время не
     поддерживается в системах Windows.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Функция <function>getimagesize</function> сейчас поддерживает файлы-иконки (.ico).
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Расширение mhash перемещено в репозиторий PECL, но расширение
     <link linkend="ref.hash">Hash</link> было изменено для поддержки
     mhash, если PHP скомпилирован с опцией <literal>--with-mhash</literal>. Обратите внимание, что
     расширение Hash не требует библиотеки mhash вне зависимости от того, включена ли эмуляция mhash или нет.
    </simpara>
   </listitem>
  </itemizedlist>
 </section>
</appendix>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
